# Elasticsearch_searchEngine

<p>This feature is a simple search engine based on Elasticsearch and the French <a href="http://www.data.gouv.fr/fr/datasets/base-sirene-des-entreprises-et-de-leurs-etablissements-siren-siret/">siren</a> database.

The goal is to provide a simple way to search into this data base using custom fields, custom queries and custom stats with the kiabana ui.
</p>

<h2>Requirement</h2>
<p>
  To use this tool you will need to get :<br>
  - <a href="https://www.elastic.co/downloads/elasticsearch">Elasticsearch</a> version : 6.2.4<br>
  - <a href="https://www.elastic.co/downloads/kibana">Kibana</a> version 6.2.4<br>
  - <a href="https://getcomposer.org">Composer</a> 
</p>

<h2>Installation</h2>
<p>
  You might be not abble to use this just clonning this repository because of composer.<br>
  To use this, delete vendor folder after clonning this repository and for windows cmd : composer install.<br>
</p>

<h2>Content</h2>
  <h3>Folders</h3>
  <p>
    - app => script used to connect elasticsearch, this script is inclued in every pages through the header.php file.<br>
    - composants => contains the header and footer files.<br>
    - docs => contains various docs about logstash, data structure, etc.There are user and admin docs written in fench.<br>
    - image => contains the flaticon.<br>
    - css => contains the <a href="https://getbootstrap.com">Bootstrap</a> files and the custom one (main.css).<br>
    - js => contains the <a href="https://getbootstrap.com">Bootstrap</a> files, the <a href="https://jquery.com">jquery</a> file and a custom file (functions.js).<br>
    - rab => contains files which have been used but not anymore. They still are here in case of need but will disappear.<br>
    - vendor => created by composer.<br>
  </p>
  <h3>Files</h3>
  <p>
    - .htaccess => is here in case of need but not used yet.<br>
    - composer.json => used by composer to create the dependencies.<br>
    - index.php => search part, whit a general search which is over all fields and a specific one which search on specified fields <br>
      with autosuggest inclued for the "Nom entreprise" one.
    - pageStats.php => this page is still bluid, it contains charts generated by kibana.<br>
    - result.php => contains one result taken by id, 3 tables for general informations about the enterprise, specific informations and informations about the person in charge of the enterprise.<br>
    - searchSuggest.php => scrpit used for the autosuggest feature, use the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters-completion.html">completion suggester</a> feature from elasticsearch
  </p>
  
<h2>Potential troubles</h2>
<p>
  Like said before, clonning this repository probably won't work for various things :<br>
    - The Elasticsearch port : default is 127.0.0.1:9200 (check config/elasticsearch.yml)<br>
    - The kibana port : default is 127.0.0.1:5601 (check config/kibana.yml)<br>
    - Usage of composer like said before.<br>
    - Check Elasticsearch version ! This was build with version : 6.2.4 make sure you'r running this one because lattest and new ones change queries syntax so it propably not work with other versions.<br>
    - If the data structure changes you might be unable to use this. Check /docs/sirenStructure.txt in case of doubt.
    - All the text are in french.
</p>
  
